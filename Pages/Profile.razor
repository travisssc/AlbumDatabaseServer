@page "/profile"
@using Microsoft.AspNetCore.Components.Authorization
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject NavigationManager NavigationManager

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

<div style="background: linear-gradient(to bottom, #212121, #121212)">
	<div class="profile-header">
		@if (isUserLoggedIn)
		{
			<img src="@profilePictureUrl" class="profile-image" />
			<div class="profile-item">
				<h2>@username</h2>
			</div>
			<div class="profile-item">
				<button class="edit-button" @onclick="NavToProfileEdit">
					Edit profile
				</button>
			</div>
		}
	</div>
	<div>

	</div>
</div>

@code {
	private bool isUserLoggedIn;
	private string username;
	private string profilePictureUrl = "profile-pictures/default-profile.png";
	protected override async Task OnInitializedAsync()
	{
		var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
		var user = authState.User;
		isUserLoggedIn = user.Identity.IsAuthenticated;
		if (isUserLoggedIn)
		{
			username = user.Identity.Name;
		}
	}
	private void NavToProfileEdit()
	{
		//NavigationManager.NavigateTo("/profile");
	}
}
